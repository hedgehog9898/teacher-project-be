{"openapi":"3.0.0","paths":{"/":{"get":{"operationId":"AppController_getHello","parameters":[],"responses":{"200":{"description":""}}}},"/api/users/{idOrUsername}":{"get":{"operationId":"UsersController_getUser","parameters":[{"name":"idOrUsername","required":true,"in":"path","description":"The id or username of the user","example":"56262 or 'username'","schema":{"type":"string"}}],"responses":{"200":{"description":"The user is found and returned.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUserMapper"}}}},"400":{"description":"Something is invalid on the request body"},"404":{"description":"The user is not found."}}}},"/api/users/email":{"patch":{"operationId":"UsersController_updateEmail","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangeEmailDto"}}}},"responses":{"200":{"description":"The email is updated, and the user is returned.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponseUserMapper"}}}},"400":{"description":"Something is invalid on the request body, or wrong password."},"401":{"description":"The user is not logged in."}}}},"/api/users":{"patch":{"operationId":"UsersController_updateUser","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserDto"}}}},"responses":{"200":{"description":"The username is updated.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseUserMapper"}}}},"400":{"description":"Something is invalid on the request body."},"401":{"description":"The user is not logged in."}}},"delete":{"operationId":"UsersController_deleteUser","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordDto"}}}},"responses":{"204":{"description":"The user is deleted."},"400":{"description":"Something is invalid on the request body, or wrong password."},"401":{"description":"The user is not logged in."}}}},"/api/auth/sign-up":{"post":{"operationId":"AuthController_signUp","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignUpDto"}}}},"responses":{"201":{"description":"The user has been created and is waiting confirmation","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageMapper"}}}},"400":{"description":"Something is invalid on the request body"},"409":{"description":"Email already in use"}}}},"/api/auth/sign-in":{"post":{"operationId":"AuthController_signIn","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignInDto"}}}},"responses":{"200":{"description":"Logs in the user and returns the access token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponseMapper"}}}},"400":{"description":"Something is invalid on the request body"},"401":{"description":"Invalid credentials or User is not confirmed"}}}},"/api/auth/refresh-access":{"post":{"operationId":"AuthController_refreshAccess","parameters":[],"responses":{"200":{"description":"Refreshes and returns the access token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponseMapper"}}}},"400":{"description":"Something is invalid on the request body, or Token is invalid or expired"},"401":{"description":"Invalid token"}}}},"/api/auth/logout":{"post":{"operationId":"AuthController_logout","parameters":[],"responses":{"200":{"description":"The user is logged out","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageMapper"}}}},"400":{"description":"Something is invalid on the request body"},"401":{"description":"Invalid token"}}}},"/api/auth/me":{"get":{"operationId":"AuthController_getMe","parameters":[],"responses":{"200":{"description":"The user is found and returned.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponseUserMapper"}}}},"401":{"description":"The user is not logged in."}}}},"/api/auth/confirm-email":{"post":{"operationId":"AuthController_confirmEmail","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConfirmEmailDto"}}}},"responses":{"200":{"description":"Confirms the user email and returns the access token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponseMapper"}}}},"400":{"description":"Something is invalid on the request body, or Token is invalid or expired"},"401":{"description":"Invalid token"}}}},"/api/auth/forgot-password":{"post":{"operationId":"AuthController_forgotPassword","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailDto"}}}},"responses":{"200":{"description":"An email has been sent to the user with the reset password link","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageMapper"}}}}}}},"/api/auth/reset-password":{"post":{"operationId":"AuthController_resetPassword","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResetPasswordDto"}}}},"responses":{"200":{"description":"The password has been reset","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageMapper"}}}},"400":{"description":"Something is invalid on the request body, or Token is invalid or expired"}}}},"/api/auth/update-password":{"patch":{"operationId":"AuthController_updatePassword","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePasswordDto"}}}},"responses":{"200":{"description":"The password has been updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponseMapper"}}}},"401":{"description":"The user is not logged in."}}}}},"info":{"title":"German language teacher","description":"The German language teacher project description","version":"1.0","contact":{}},"tags":[{"name":"ai","description":""}],"servers":[],"components":{"schemas":{"ResponseUserMapper":{"type":"object","properties":{"id":{"type":"number","description":"User id","example":123,"minimum":1},"name":{"type":"string","description":"User name","example":"John Doe","minLength":3,"maxLength":100},"username":{"type":"string","description":"User username","example":"john.doe1","minLength":3,"maxLength":106},"createdAt":{"type":"string","description":"User creation date","example":"2021-01-01T00:00:00.000Z"},"updatedAt":{"type":"string","description":"User last update date","example":"2021-01-01T00:00:00.000Z"}},"required":["id","name","username","createdAt","updatedAt"]},"ChangeEmailDto":{"type":"object","properties":{"password":{"type":"string","description":"The password of the user","minLength":1},"email":{"type":"string","description":"The email of the user","example":"someone@gmail.com","minLength":5,"maxLength":255}},"required":["password","email"]},"AuthResponseUserMapper":{"type":"object","properties":{"id":{"type":"number","description":"User id","example":123,"minimum":1},"name":{"type":"string","description":"User name","example":"John Doe","minLength":3,"maxLength":100},"username":{"type":"string","description":"User username","example":"john.doe1","minLength":3,"maxLength":106},"email":{"type":"string","description":"User email","example":"example@gmail.com","minLength":5,"maxLength":255},"createdAt":{"type":"string","description":"User creation date","example":"2021-01-01T00:00:00.000Z"},"updatedAt":{"type":"string","description":"User last update date","example":"2021-01-01T00:00:00.000Z"}},"required":["id","name","username","email","createdAt","updatedAt"]},"UpdateUserDto":{"type":"object","properties":{"username":{"type":"string","description":"The new username","example":"new-username"},"name":{"type":"string","description":"The new name","example":"John Doe"}},"required":["username","name"]},"PasswordDto":{"type":"object","properties":{"password":{"type":"string","description":"The password of the user","minLength":1}},"required":["password"]},"SignUpDto":{"type":"object","properties":{"password":{"type":"string","description":"New password","minLength":8,"maxLength":35},"repeatedPassword":{"type":"string","description":"Password confirmation","minLength":8,"maxLength":35},"name":{"type":"string","description":"The user name","minLength":3,"maxLength":100},"email":{"type":"string","description":"The user email","example":"example@gmail.com","minLength":5,"maxLength":255}},"required":["password","repeatedPassword","name","email"]},"MessageMapper":{"type":"object","properties":{"id":{"type":"string","description":"Message UUID","example":"c0a80121-7ac0-11d1-898c-00c04fd8d5cd"},"message":{"type":"string","description":"Message","example":"Hello World"}},"required":["id","message"]},"SignInDto":{"type":"object","properties":{"password":{"type":"string","description":"New password","minLength":8,"maxLength":35},"repeatedPassword":{"type":"string","description":"Password confirmation","minLength":8,"maxLength":35},"emailOrUsername":{"type":"string","description":"Username or email","examples":["john.doe","john.doe@gmail.com"],"minLength":3,"maxLength":255}},"required":["password","repeatedPassword","emailOrUsername"]},"AuthResponseMapper":{"type":"object","properties":{"user":{"description":"User","allOf":[{"$ref":"#/components/schemas/AuthResponseUserMapper"}]},"accessToken":{"type":"string","description":"Access token","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"}},"required":["user","accessToken"]},"ConfirmEmailDto":{"type":"object","properties":{"confirmationToken":{"type":"string","description":"The JWT token sent to the user email","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"}},"required":["confirmationToken"]},"EmailDto":{"type":"object","properties":{"email":{"type":"string","description":"The email of the user","example":"someone@gmail.com","minLength":5,"maxLength":255}},"required":["email"]},"ResetPasswordDto":{"type":"object","properties":{"password":{"type":"string","description":"New password","minLength":8,"maxLength":35},"repeatedPassword":{"type":"string","description":"Password confirmation","minLength":8,"maxLength":35},"resetToken":{"type":"string","description":"The JWT token sent to the user email","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"}},"required":["password","repeatedPassword","resetToken"]},"ChangePasswordDto":{"type":"object","properties":{"password":{"type":"string","description":"New password","minLength":8,"maxLength":35},"repeatedPassword":{"type":"string","description":"Password confirmation","minLength":8,"maxLength":35},"changedPassword":{"type":"string","description":"The current password","minLength":1}},"required":["password","repeatedPassword","changedPassword"]}}}}